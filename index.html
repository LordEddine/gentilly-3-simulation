<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OP√âRATION R√âACTEUR-7 ‚Äî Gentilly-3</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>



    <!-- ============================================ -->
    <!-- SCANLINE + CRT OVERLAY                       -->
    <!-- ============================================ -->
    <div class="crt-overlay"></div>
    <div class="scanline"></div>

    <!-- ============================================ -->
    <!-- BOOT SCREEN                                  -->
    <!-- ============================================ -->
    <div id="screen-boot" class="screen active">
        <div class="boot-container">
            <pre class="boot-ascii" id="boot-ascii"></pre>
            <div class="boot-text" id="boot-text"></div>
            <div class="boot-progress">
                <div class="boot-progress-bar" id="boot-progress-bar"></div>
            </div>
            <div class="boot-status" id="boot-status">INITIALISATION DES SYST√àMES...</div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- LOGIN SCREEN                                 -->
    <!-- ============================================ -->
    <div id="screen-login" class="screen">
        <div class="login-container">
            <div class="login-header">
                <div class="facility-logo">‚ò¢</div>
                <h1>GENTILLY-3</h1>
                <p class="subtitle">SYST√àME DE S√âCURIT√â NUCL√âAIRE</p>
                <p class="classified">‚ñì‚ñì ACC√àS CLASSIFI√â ‚Äî NIVEAU RESTREINT ‚ñì‚ñì</p>
            </div>
            <div class="login-box">
                <div class="login-field">
                    <label>NOM DE CODE AGENT :</label>
                    <input type="text" id="agent-name" placeholder="Entrez votre nom de code..." autocomplete="off" spellcheck="false">
                </div>
                <button id="btn-login" class="btn-terminal" disabled>
                    <span class="btn-text">[ ACC√àS REFUS√â ]</span>
                </button>
                <p class="login-hint" id="login-hint"></p>
            </div>
            <div class="login-footer">
                <p>OP√âRATION R√âACTEUR-7 // CLASSIFI√â // NE PAS DISTRIBUER</p>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- MAIN INTERFACE                               -->
    <!-- ============================================ -->
    <div id="screen-main" class="screen">

        <!-- TOP BAR -->
        <header class="top-bar">
            <div class="top-left">
                <span class="facility-badge">‚ò¢ GENTILLY-3</span>
                <span class="separator">|</span>
                <span class="operation-name">OP√âRATION R√âACTEUR-7</span>
            </div>
            <div class="top-center">
                <div class="timer-display">
                    <span class="timer-label">SURCHARGE R√âACTEUR DANS</span>
                    <span class="timer-value" id="main-timer">03:00:00</span>
                </div>
            </div>
            <div class="top-right">
                <span class="agent-badge" id="agent-badge">AGENT: ---</span>
                <span class="clearance" id="clearance-badge">NIVEAU 0</span>
                <button class="btn-sound" id="btn-sound" title="Activer/Couper le son">üîá</button>
            </div>

            <!-- AUDIO AMBIANCE -->
            <audio id="ambiance-audio" loop preload="auto">
                <source src="assets/ambiance.mp3" type="audio/mpeg">
            </audio>
        </header>

        <!-- CONTENT AREA -->
        <div class="main-content">

            <!-- SIDEBAR -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>üì° MISSIONS</h3>
                    <nav class="mission-nav">
                        <button class="nav-btn active" data-level="briefing" id="nav-briefing">
                            <span class="nav-icon">üìã</span>
                            <span class="nav-label">BRIEFING</span>
                            <span class="nav-status status-available">‚óè</span>
                        </button>
                        <button class="nav-btn locked" data-level="level1" id="nav-level1">
                            <span class="nav-icon">üîç</span>
                            <span class="nav-label">NIV.1 ‚Äî LOGS</span>
                            <span class="nav-status status-locked">üîí</span>
                        </button>
                        <button class="nav-btn locked" data-level="level2" id="nav-level2">
                            <span class="nav-icon">üåê</span>
                            <span class="nav-label">NIV.2 ‚Äî R√âSEAU</span>
                            <span class="nav-status status-locked">üîí</span>
                        </button>
                        <button class="nav-btn locked" data-level="level3" id="nav-level3">
                            <span class="nav-icon">üõ°Ô∏è</span>
                            <span class="nav-label">NIV.3 ‚Äî D√âFENSE</span>
                            <span class="nav-status status-locked">üîí</span>
                        </button>
                        <button class="nav-btn locked" data-level="level4" id="nav-level4">
                            <span class="nav-icon">üìù</span>
                            <span class="nav-label">NIV.4 ‚Äî RAPPORT</span>
                            <span class="nav-status status-locked">üîí</span>
                        </button>
                    </nav>
                </div>

                <div class="sidebar-section">
                    <h3>üìÅ FICHIERS LOGS</h3>
                    <div class="file-explorer">
                        <div class="folder-item" id="folder-logs">
                            <span class="folder-toggle">‚ñº</span>
                            <span class="folder-name">logs_centrale/</span>
                        </div>
                        <div class="file-list" id="file-list-logs">
                            <div class="file-item" data-file="logs_centrale/access.log">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name">access.log</span>
                            </div>
                            <div class="file-item" data-file="logs_centrale/capteurs.log">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name">capteurs.log</span>
                            </div>
                            <div class="file-item" data-file="logs_centrale/auth.log">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name">auth.log</span>
                            </div>
                            <div class="file-item" data-file="logs_centrale/connexions_actives.txt">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name">connexions_actives.txt</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3>üîë CODE D'ACC√àS</h3>
                    <div class="unlock-box">
                        <input type="text" id="unlock-code" placeholder="Entrez le code..." autocomplete="off" spellcheck="false">
                        <button id="btn-unlock" class="btn-terminal-sm">D√âVERROUILLER</button>
                    </div>
                    <p class="unlock-hint" id="unlock-hint"></p>
                </div>

                <div class="sidebar-section radio-section">
                    <h3>üìª RADIO COMMS</h3>
                    <div class="radio-feed" id="radio-feed">
                        <div class="radio-msg">
                            <span class="radio-time">02:47</span>
                            <span class="radio-text">Syst√®me en ligne. En attente du briefing...</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- MAIN PANEL -->
            <main class="main-panel" id="main-panel">

                <!-- BRIEFING -->
                <section class="level-content" id="content-briefing">
                    <div class="content-header">
                        <h2>üìã BRIEFING ‚Äî CONTEXTE DE L'INCIDENT</h2>
                        <div class="classification">SECRET D√âFENSE ‚Äî DIFFUSION RESTREINTE</div>
                    </div>
                    <div class="terminal-box">
                        <div class="terminal-header">
                            <span class="terminal-dot red"></span>
                            <span class="terminal-dot yellow"></span>
                            <span class="terminal-dot green"></span>
                            <span class="terminal-title">transmission_entrante.log</span>
                        </div>
                        <div class="terminal-body" id="briefing-text">
                            <!-- Filled by typewriter -->
                        </div>
                    </div>
                    <div class="info-cards" id="briefing-cards" style="display:none;">
                        <div class="info-card">
                            <div class="card-icon">üìÖ</div>
                            <div class="card-title">DATE</div>
                            <div class="card-value">14 mars 2026, 02h47</div>
                        </div>
                        <div class="info-card">
                            <div class="card-icon">üìç</div>
                            <div class="card-title">LIEU</div>
                            <div class="card-value">Centrale Gentilly-3</div>
                        </div>
                        <div class="info-card alert">
                            <div class="card-icon">‚ö†Ô∏è</div>
                            <div class="card-title">MENACE</div>
                            <div class="card-value">Cyberattaque en cours</div>
                        </div>
                        <div class="info-card">
                            <div class="card-icon">üéØ</div>
                            <div class="card-title">CIBLE</div>
                            <div class="card-value">R√©acteur 7 ‚Äî Capteurs</div>
                        </div>
                    </div>
                    <div class="mission-brief" id="briefing-mission" style="display:none;">
                        <h3>üéØ VOTRE MISSION</h3>
                        <p>Analyser, identifier et neutraliser la menace avant qu'elle ne compromette les syst√®mes critiques de la centrale.</p>
                        <p class="warning-text">‚ö†Ô∏è Entrez le code d'acc√®s ci-dessous pour d√©buter le Niveau 1.</p>
                    </div>
                    <div class="code-reveal hidden" id="code-reveal-briefing">
                        <div class="code-reveal-box">
                            <div class="code-reveal-label">üîë CODE D'ACC√àS ‚Äî NIVEAU 1</div>
                            <div class="code-reveal-value">ALPHA</div>
                            <div class="code-reveal-hint">Entrez ce code dans la section ¬´ Code d'acc√®s ¬ª de la barre lat√©rale</div>
                        </div>
                    </div>
                </section>

                <!-- LEVEL 1 -->
                <section class="level-content hidden" id="content-level1">
                    <div class="content-header">
                        <h2>üîç NIVEAU 1 ‚Äî ANALYSE DES LOGS</h2>
                        <div class="classification">DUR√âE ESTIM√âE : 40 MINUTES</div>
                    </div>
                    <div class="comm-message">
                        <div class="comm-sender">üì® MSG DE : √âquipe de nuit</div>
                        <div class="comm-body">
                            <p>¬´ On a remarqu√© des trucs bizarres dans les logs. Les capteurs du r√©acteur 7 donnent des valeurs folles et on voit du trafic qu'on ne reconna√Æt pas. On vous envoie les fichiers de logs. Trouvez ce qui se passe. ¬ª</p>
                        </div>
                    </div>

                    <div class="objectives-panel" id="objectives-level1">
                        <div class="objectives-header">
                            <h3>üéØ OBJECTIFS √Ä VALIDER</h3>
                            <div class="objectives-progress">
                                <div class="progress-bar"><div class="progress-fill" id="progress-level1"></div></div>
                                <span class="progress-text" id="progress-text-level1">0 / 6</span>
                            </div>
                        </div>
                        <p class="objectives-desc">Utilisez le terminal en bas de page pour ex√©cuter vos commandes. Chaque objectif se valide automatiquement quand la bonne r√©ponse appara√Æt dans la sortie.</p>
                        <div class="objectives-list">
                            <div class="obj-item" data-obj="l1-ip"><span class="obj-check">‚óã</span><span class="obj-text">Identifier l'adresse IP source externe suspecte</span></div>
                            <div class="obj-item" data-obj="l1-count"><span class="obj-check">‚óã</span><span class="obj-text">Compter les connexions de l'IP suspecte dans access.log</span></div>
                            <div class="obj-item" data-obj="l1-ports"><span class="obj-check">‚óã</span><span class="obj-text">Trouver les 3 ports non-standards utilis√©s par l'attaquant</span></div>
                            <div class="obj-item" data-obj="l1-sensors"><span class="obj-check">‚óã</span><span class="obj-text">D√©tecter les anomalies dans les capteurs du r√©acteur</span></div>
                            <div class="obj-item" data-obj="l1-auth"><span class="obj-check">‚óã</span><span class="obj-text">Trouver le compte compromis par l'attaquant</span></div>
                            <div class="obj-item" data-obj="l1-cmds"><span class="obj-check">‚óã</span><span class="obj-text">D√©couvrir les commandes ex√©cut√©es apr√®s intrusion</span></div>
                        </div>
                        <div class="level-complete-banner hidden" id="banner-level1">
                            üéâ NIVEAU 1 COMPL√âT√â ‚Äî ACC√àS AU NIVEAU 2 D√âVERROUILL√â
                            <div class="code-reveal-inline">üîë Code Niveau 2 : <span class="code-value">BRAVO</span></div>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 1.1 ‚Äî Trouver l'intrus (grep)</h3>
                        <div class="context-box">
                            <strong>Contexte :</strong> Le r√©seau interne de la centrale utilise la plage <code>192.168.1.0/24</code>. Toute adresse <strong>source</strong> (<code>SRC=</code>) en dehors de cette plage est potentiellement suspecte.
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> Quelle adresse IP source externe appara√Æt dans les logs d'acc√®s ?</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep -v "SRC=192.168.1" logs_centrale/access.log</code>
                                </div>
                            </div>
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Bonus :</strong> Combien de fois cette IP appara√Æt-elle ?</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep -c "IP_SUSPECTE" logs_centrale/access.log</code>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 1.2 ‚Äî Identifier les ports suspects (awk)</h3>
                        <div class="context-box">
                            <strong>Contexte :</strong> Les ports standards de la centrale sont : <code>22</code> (SSH), <code>80</code> (HTTP), <code>443</code> (HTTPS), <code>3306</code> (MySQL), <code>8080</code> (Tomcat). Tout autre port est suspect.
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> Quels ports non-standards sont utilis√©s par l'attaquant ?</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep "IP_SUSPECTE" logs_centrale/access.log | awk '{print $4}' | sed 's/PORT=//' | sort -u</code>
                                </div>
                            </div>
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Bonus :</strong> Que repr√©sentent ces ports dans le monde du hacking ?</p>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 1.3 ‚Äî Analyser les capteurs (awk + sed)</h3>
                        <div class="context-box">
                            <strong>Contexte :</strong> La temp√©rature normale du r√©acteur est entre <strong>290¬∞C et 320¬∞C</strong>. La pression normale est entre <strong>150 et 160 bar</strong>.
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> Trouvez toutes les entr√©es o√π les capteurs montrent des valeurs anormales.</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep -v "NORMAL" logs_centrale/capteurs.log</code>
                                </div>
                            </div>
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> Extraire uniquement les valeurs de temp√©rature et leur statut.</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep "TEMP_REACT_7" logs_centrale/capteurs.log | awk '{print $3, $5}'</code>
                                </div>
                            </div>
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Question critique :</strong> Les valeurs sont-elles vraiment anormales ou l'attaquant les falsifie-t-il ? Justifiez en comparant les horodatages.</p>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 1.4 ‚Äî Analyser les tentatives d'authentification</h3>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> L'attaquant a-t-il r√©ussi √† s'authentifier ? Avec quel compte ?</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep "IP_SUSPECTE" logs_centrale/auth.log | grep "SUCCESS"</code>
                                </div>
                            </div>
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> Quelles commandes l'attaquant a-t-il ex√©cut√©es apr√®s sa connexion ?</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep "IP_SUSPECTE" logs_centrale/auth.log | grep "SUDO" | sed 's/.*CMD="//' | sed 's/"//'</code>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TERMINAL SIMUL√â NIVEAU 1 -->
                    <div class="terminal-section">
                        <h3>üíª Terminal d'analyse</h3>
                        <p class="terminal-desc">Utilisez ce terminal pour tester vos commandes directement sur les fichiers de logs.</p>
                        <div class="sim-terminal" id="term-level1" data-level="level1">
                            <div class="sim-header">
                                <span class="sim-dot red"></span>
                                <span class="sim-dot yellow"></span>
                                <span class="sim-dot green"></span>
                                <span class="sim-title">agent@gentilly3:~/logs_centrale$</span>
                            </div>
                            <div class="sim-output"></div>
                            <div class="sim-input-line">
                                <span class="sim-prompt">$</span>
                                <input type="text" class="sim-input" placeholder="Tapez une commande..." spellcheck="false" autocomplete="off">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- LEVEL 2 -->
                <section class="level-content hidden" id="content-level2">
                    <div class="content-header">
                        <h2>üåê NIVEAU 2 ‚Äî SURVEILLANCE R√âSEAU</h2>
                        <div class="classification">DUR√âE ESTIM√âE : 40 MINUTES</div>
                    </div>
                    <div class="comm-message">
                        <div class="comm-sender">üì® MSG DE : Commandant Lavoie</div>
                        <div class="comm-body">
                            <p>¬´ Bon travail sur l'analyse des logs. Maintenant, on a besoin que vous examiniez les connexions actives et que vous compreniez comment l'attaquant communique avec notre r√©seau. Chen dit que certaines machines r√©pondent bizarrement. ¬ª</p>
                        </div>
                    </div>

                    <div class="objectives-panel" id="objectives-level2">
                        <div class="objectives-header">
                            <h3>üéØ OBJECTIFS √Ä VALIDER</h3>
                            <div class="objectives-progress">
                                <div class="progress-bar"><div class="progress-fill" id="progress-level2"></div></div>
                                <span class="progress-text" id="progress-text-level2">0 / 3</span>
                            </div>
                        </div>
                        <p class="objectives-desc">Analysez les connexions r√©seau dans le terminal. Les objectifs se valident automatiquement.</p>
                        <div class="objectives-list">
                            <div class="obj-item" data-obj="l2-connections"><span class="obj-check">‚óã</span><span class="obj-text">Identifier les connexions suspectes dans connexions_actives.txt</span></div>
                            <div class="obj-item" data-obj="l2-programs"><span class="obj-check">‚óã</span><span class="obj-text">Extraire les programmes utilis√©s par l'attaquant (nc, python3)</span></div>
                            <div class="obj-item" data-obj="l2-timeline"><span class="obj-check">‚óã</span><span class="obj-text">Reconstituer la timeline tri√©e de l'attaque</span></div>
                        </div>
                        <div class="level-complete-banner hidden" id="banner-level2">
                            üéâ NIVEAU 2 COMPL√âT√â ‚Äî ACC√àS AU NIVEAU 3 D√âVERROUILL√â
                            <div class="code-reveal-inline">üîë Code Niveau 3 : <span class="code-value">CHARLIE</span></div>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 2.1 ‚Äî Analyser les connexions actives (awk)</h3>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> √Ä partir du fichier <code>connexions_actives.txt</code>, identifiez toutes les connexions suspectes.</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep "10.0.0.55" logs_centrale/connexions_actives.txt</code>
                                </div>
                            </div>
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Question :</strong> Extraire les ports et programmes suspects.</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep "10.0.0.55" logs_centrale/connexions_actives.txt | awk '{print $3, $4, $6}'</code>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 2.2 ‚Äî Comprendre netcat</h3>
                        <div class="context-box">
                            <strong>Contexte :</strong> Votre commandant va faire une d√©monstration en direct. Observez attentivement.
                        </div>
                        <div class="question-box">
                            <p>‚ùì <strong>Exercice :</strong> Expliquez dans vos propres mots ce que font les commandes suivantes :</p>
                            <div class="code-display">
                                <code>nc -l -p 4444</code><br>
                                <code>echo "Donn√©es confidentielles" | nc localhost 4444</code>
                            </div>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 2.3 ‚Äî Identifier les adresses IP et r√©seaux</h3>
                        <div class="question-box">
                            <p>‚ùì <strong>Exercice :</strong> Remplissez le tableau suivant en vous basant sur les logs :</p>
                            <table class="data-table">
                                <thead>
                                    <tr><th>Adresse IP</th><th>R√©seau</th><th>R√¥le probable</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td>192.168.1.10</td><td>?</td><td>?</td></tr>
                                    <tr><td>192.168.1.12</td><td>?</td><td>?</td></tr>
                                    <tr><td>192.168.1.15</td><td>?</td><td>?</td></tr>
                                    <tr><td>192.168.1.20</td><td>?</td><td>?</td></tr>
                                    <tr><td>192.168.1.100</td><td>?</td><td>?</td></tr>
                                    <tr><td>192.168.1.200</td><td>?</td><td>?</td></tr>
                                    <tr><td>10.0.0.55</td><td>?</td><td>?</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 2.4 ‚Äî Timeline de l'attaque</h3>
                        <div class="question-box">
                            <p>‚ùì <strong>Exercice :</strong> En utilisant TOUS les fichiers de logs, reconstituez la chronologie compl√®te de l'attaque.</p>
                            <div class="hint-container">
                                <button class="btn-hint" onclick="toggleHint(this)">üí° Indice</button>
                                <div class="hint-content hidden">
                                    <code>grep "10.0.0.55" logs_centrale/access.log logs_centrale/auth.log | sort -t']' -k1</code>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TERMINAL SIMUL√â NIVEAU 2 -->
                    <div class="terminal-section">
                        <h3>üíª Terminal de surveillance</h3>
                        <p class="terminal-desc">Analysez les connexions actives et le trafic r√©seau.</p>
                        <div class="sim-terminal" id="term-level2" data-level="level2">
                            <div class="sim-header">
                                <span class="sim-dot red"></span>
                                <span class="sim-dot yellow"></span>
                                <span class="sim-dot green"></span>
                                <span class="sim-title">agent@gentilly3:~/logs_centrale$</span>
                            </div>
                            <div class="sim-output"></div>
                            <div class="sim-input-line">
                                <span class="sim-prompt">$</span>
                                <input type="text" class="sim-input" placeholder="Tapez une commande..." spellcheck="false" autocomplete="off">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- LEVEL 3 -->
                <section class="level-content hidden" id="content-level3">
                    <div class="content-header">
                        <h2>üõ°Ô∏è NIVEAU 3 ‚Äî SCRIPTS DE D√âFENSE</h2>
                        <div class="classification">DUR√âE ESTIM√âE : 45 MINUTES</div>
                    </div>
                    <div class="comm-message urgent">
                        <div class="comm-sender">üö® MSG URGENT DE : Commandant Lavoie</div>
                        <div class="comm-body">
                            <p>¬´ L'attaque est confirm√©e ! On a besoin de scripts pour bloquer l'attaquant et surveiller le syst√®me. √âcrivez-nous des outils qu'on pourra r√©utiliser. Le temps presse ! ¬ª</p>
                        </div>
                    </div>

                    <div class="objectives-panel" id="objectives-level3">
                        <div class="objectives-header">
                            <h3>üéØ OBJECTIFS √Ä VALIDER</h3>
                            <div class="objectives-progress">
                                <div class="progress-bar"><div class="progress-fill" id="progress-level3"></div></div>
                                <span class="progress-text" id="progress-text-level3">0 / 3</span>
                            </div>
                        </div>
                        <p class="objectives-desc">Avant d'√©crire vos scripts, prouvez votre ma√Ætrise des commandes dans le terminal. Validez les objectifs puis r√©digez vos scripts.</p>
                        <div class="objectives-list">
                            <div class="obj-item" data-obj="l3-extract"><span class="obj-check">‚óã</span><span class="obj-text">Extraire les IPs suspectes avec leur nombre d'occurrences</span></div>
                            <div class="obj-item" data-obj="l3-ports"><span class="obj-check">‚óã</span><span class="obj-text">Lister les ports avec SERVICE=UNKNOWN</span></div>
                            <div class="obj-item" data-obj="l3-temps"><span class="obj-check">‚óã</span><span class="obj-text">Filtrer les temp√©ratures sup√©rieures √† 320¬∞C</span></div>
                        </div>
                        <div class="level-complete-banner hidden" id="banner-level3">
                            üéâ NIVEAU 3 COMPL√âT√â ‚Äî ACC√àS AU NIVEAU 4 D√âVERROUILL√â
                            <div class="code-reveal-inline">üîë Code Niveau 4 : <span class="code-value">DELTA</span></div>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 3.1 ‚Äî Script de d√©tection d'IP suspecte</h3>
                        <div class="context-box">
                            <strong>Consigne :</strong> √âcrire un script bash <code>detecteur.sh</code> qui prend un fichier de log en param√®tre et affiche toutes les adresses IP qui ne font PAS partie du r√©seau <code>192.168.1</code>.
                        </div>
                        <div class="requirements-box">
                            <p><strong>Le script doit :</strong></p>
                            <ul>
                                <li>V√©rifier qu'un param√®tre est donn√©</li>
                                <li>Extraire toutes les IP du fichier</li>
                                <li>Filtrer celles qui ne sont pas en 192.168.1.x</li>
                                <li>Afficher le nombre de connexions par IP suspecte</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 3.2 ‚Äî Script de blocage de ports</h3>
                        <div class="context-box">
                            <strong>Consigne :</strong> √âcrire un script bash <code>bloquer_ports.sh</code> qui lit <code>access.log</code>, trouve les ports avec <code>SERVICE=UNKNOWN</code>, et g√©n√®re les r√®gles <code>iptables</code> correspondantes.
                        </div>
                        <div class="requirements-box">
                            <p><strong>Le script doit :</strong></p>
                            <ul>
                                <li>Identifier automatiquement les ports suspects</li>
                                <li>G√©n√©rer des r√®gles iptables INPUT et OUTPUT pour chaque port</li>
                                <li>Bloquer aussi l'IP de l'attaquant</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 3.3 ‚Äî Script Python d'alerte</h3>
                        <div class="context-box">
                            <strong>Consigne :</strong> √âcrire un script Python <code>alerte.py</code> qui lit <code>capteurs.log</code> et affiche une alerte pour chaque temp√©rature sup√©rieure √† <strong>320¬∞C</strong>.
                        </div>
                        <div class="requirements-box">
                            <p><strong>Le script doit :</strong></p>
                            <ul>
                                <li>Ouvrir et lire le fichier de capteurs</li>
                                <li>Filtrer les lignes avec TEMP_REACT_7</li>
                                <li>Extraire la valeur et la comparer au seuil</li>
                                <li>Classer l'alerte (ALERTE / CRITIQUE / DANGER)</li>
                                <li>Afficher un r√©sum√© avec le total des alertes</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission 3.4 ‚Äî Script de surveillance continue</h3>
                        <div class="context-box">
                            <strong>Consigne :</strong> √âcrire un script <code>moniteur.sh</code> qui surveille un fichier de log en temps r√©el et alerte quand l'IP <code>10.0.0.55</code> appara√Æt.
                        </div>
                        <div class="requirements-box">
                            <p><strong>Le script doit :</strong></p>
                            <ul>
                                <li>Utiliser <code>tail -f</code> pour la surveillance en temps r√©el</li>
                                <li>Filtrer les lignes contenant l'IP dangereuse</li>
                                <li>Afficher une alerte avec l'heure de d√©tection</li>
                            </ul>
                        </div>
                    </div>
                    <!-- TERMINAL SIMUL√â NIVEAU 3 -->
                    <div class="terminal-section">
                        <h3>üíª Terminal de d√©veloppement</h3>
                        <p class="terminal-desc">Testez vos commandes avant d'√©crire vos scripts. Les fichiers de logs sont accessibles.</p>
                        <div class="sim-terminal" id="term-level3" data-level="level3">
                            <div class="sim-header">
                                <span class="sim-dot red"></span>
                                <span class="sim-dot yellow"></span>
                                <span class="sim-dot green"></span>
                                <span class="sim-title">agent@gentilly3:~/logs_centrale$</span>
                            </div>
                            <div class="sim-output"></div>
                            <div class="sim-input-line">
                                <span class="sim-prompt">$</span>
                                <input type="text" class="sim-input" placeholder="Tapez une commande..." spellcheck="false" autocomplete="off">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- LEVEL 4 -->
                <section class="level-content hidden" id="content-level4">
                    <div class="content-header">
                        <h2>üìù NIVEAU 4 ‚Äî RAPPORT FINAL</h2>
                        <div class="classification">DUR√âE ESTIM√âE : 20 MINUTES</div>
                    </div>
                    <div class="comm-message success">
                        <div class="comm-sender">üì® MSG DE : Commandant Lavoie</div>
                        <div class="comm-body">
                            <p>¬´ La menace est sous contr√¥le gr√¢ce √† votre travail. Il nous faut maintenant un rapport officiel d'incident. Le gouvernement l'attend. Soyez pr√©cis et complets. ¬ª</p>
                        </div>
                    </div>

                    <div class="mission-block">
                        <h3>üîπ Mission Finale ‚Äî Rapport d'incident</h3>
                        <div class="context-box">
                            <strong>Consigne :</strong> R√©digez un rapport d'incident (5 √† 10 lignes) qui r√©sume :
                        </div>
                        <div class="report-checklist">
                            <div class="checklist-item"><span class="check">1</span> <strong>QUI</strong> a attaqu√© ? (adresse IP, m√©thode)</div>
                            <div class="checklist-item"><span class="check">2</span> <strong>COMMENT</strong> l'attaquant est entr√© ? (vecteur d'attaque)</div>
                            <div class="checklist-item"><span class="check">3</span> <strong>QUOI</strong> : qu'a fait l'attaquant une fois √† l'int√©rieur ?</div>
                            <div class="checklist-item"><span class="check">4</span> <strong>IMPACT</strong> : quelles cons√©quences pour la centrale ?</div>
                            <div class="checklist-item"><span class="check">5</span> <strong>SOLUTION</strong> : quelles mesures prendre ?</div>
                        </div>
                        <div class="report-form">
                            <label>RAPPORT D'INCIDENT ‚Äî CLASSIFICATION : SECRET</label>
                            <textarea id="report-textarea" placeholder="Agent [VOTRE NOM DE CODE], rapport d'incident Gentilly-3...&#10;&#10;L'attaque a √©t√© men√©e depuis..." rows="12"></textarea>
                            <div class="comment-section">
                                <label>COMMENTAIRE POUR L'EXERCICE ET LE PROF</label>
                                <textarea id="report-comment" placeholder="Vos remarques sur l'exercice, difficult√©s rencontr√©es, suggestions..." rows="4"></textarea>
                            </div>
                            <div class="report-footer">
                                <span id="report-chars">0 caract√®res</span>
                                <button class="btn-terminal" id="btn-submit-report">[ SOUMETTRE LE RAPPORT ]</button>
                            </div>
                        </div>
                    </div>

                    <div class="mission-complete hidden" id="mission-complete">
                        <div class="complete-box">
                            <h2>‚úÖ MISSION ACCOMPLIE</h2>
                            <p>Agent <span class="agent-name-display"></span>, votre rapport a √©t√© transmis au commandement.</p>
                            <p>La centrale Gentilly-3 est s√©curis√©e gr√¢ce √† votre intervention.</p>
                            <div class="complete-ascii">
<pre>
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë                                       ‚ïë
    ‚ïë    OP√âRATION R√âACTEUR-7               ‚ïë
    ‚ïë    STATUS : ‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ† TERMIN√âE      ‚ïë
    ‚ïë                                       ‚ïë
    ‚ïë    MENACE NEUTRALIS√âE                 ‚ïë
    ‚ïë    SYST√àMES RESTAUR√âS                 ‚ïë
    ‚ïë    RAPPORT TRANSMIS                   ‚ïë
    ‚ïë                                       ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
</pre>
                            </div>
                        </div>
                    </div>
                </section>

            </main>
        </div>

        <!-- TOAST NOTIFICATIONS -->
        <div class="toast-container" id="toast-container"></div>

    </div>

    <!-- FILE VIEWER OVERLAY -->
    <div id="file-viewer-overlay" class="file-viewer-overlay hidden">
        <div class="file-viewer">
            <div class="file-viewer-header">
                <div class="file-viewer-dots">
                    <span class="sim-dot red"></span>
                    <span class="sim-dot yellow"></span>
                    <span class="sim-dot green"></span>
                </div>
                <span class="file-viewer-title" id="file-viewer-title">fichier.log</span>
                <button class="file-viewer-close" id="file-viewer-close">‚úï</button>
            </div>
            <pre class="file-viewer-content" id="file-viewer-content"></pre>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="js/typewriter.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/terminal.js"></script>
    <script src="js/app.js"></script>

</body>
</html>
